<svg width="900" height="700" xmlns="http://www.w3.org/2000/svg">
  <!-- Title -->
  <text x="450" y="30" font-size="20" font-weight="bold" text-anchor="middle" fill="#333">Delivery Robot - Complete Computation Graph</text>
  <text x="450" y="55" font-size="13" text-anchor="middle" fill="#666">(Topics, Services, and Actions)</text>

  <!-- Sensor Nodes -->
  <ellipse cx="150" cy="150" rx="70" ry="45" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
  <text x="150" y="145" font-size="12" font-weight="bold" text-anchor="middle" fill="#1565c0">/camera</text>
  <text x="150" y="160" font-size="9" text-anchor="middle" fill="#555">Publisher</text>

  <ellipse cx="150" cy="250" rx="70" ry="45" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
  <text x="150" y="245" font-size="12" font-weight="bold" text-anchor="middle" fill="#1565c0">/lidar</text>
  <text x="150" y="260" font-size="9" text-anchor="middle" fill="#555">Publisher</text>

  <ellipse cx="150" cy="350" rx="70" ry="45" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
  <text x="150" y="345" font-size="12" font-weight="bold" text-anchor="middle" fill="#1565c0">/gps</text>
  <text x="150" y="360" font-size="9" text-anchor="middle" fill="#555">Publisher</text>

  <!-- Topics (Sensor Data) -->
  <rect x="280" y="130" width="90" height="40" fill="#fff3e0" stroke="#f57c00" stroke-width="1" rx="4"/>
  <text x="325" y="155" font-size="10" text-anchor="middle" fill="#e65100">/camera/image</text>

  <rect x="280" y="230" width="90" height="40" fill="#fff3e0" stroke="#f57c00" stroke-width="1" rx="4"/>
  <text x="325" y="255" font-size="10" text-anchor="middle" fill="#e65100">/scan</text>

  <rect x="280" y="330" width="90" height="40" fill="#fff3e0" stroke="#f57c00" stroke-width="1" rx="4"/>
  <text x="325" y="355" font-size="10" text-anchor="middle" fill="#e65100">/gps/fix</text>

  <!-- Perception Node -->
  <ellipse cx="500" cy="200" rx="80" ry="50" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2"/>
  <text x="500" y="195" font-size="12" font-weight="bold" text-anchor="middle" fill="#6a1b9a">/perception</text>
  <text x="500" y="210" font-size="9" text-anchor="middle" fill="#555">Subscriber + Publisher</text>

  <!-- Localization Node -->
  <ellipse cx="500" cy="350" rx="80" ry="50" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="2"/>
  <text x="500" y="345" font-size="12" font-weight="bold" text-anchor="middle" fill="#6a1b9a">/localization</text>
  <text x="500" y="360" font-size="9" text-anchor="middle" fill="#555">Subscriber + Publisher</text>

  <!-- Processed Data Topics -->
  <rect x="640" y="180" width="100" height="40" fill="#fff3e0" stroke="#f57c00" stroke-width="1" rx="4"/>
  <text x="690" y="205" font-size="10" text-anchor="middle" fill="#e65100">/obstacles</text>

  <rect x="640" y="330" width="100" height="40" fill="#fff3e0" stroke="#f57c00" stroke-width="1" rx="4"/>
  <text x="690" y="355" font-size="10" text-anchor="middle" fill="#e65100">/odom</text>

  <!-- Planner Node -->
  <ellipse cx="500" cy="480" rx="80" ry="50" fill="#e8f5e9" stroke="#388e3c" stroke-width="2"/>
  <text x="500" y="475" font-size="12" font-weight="bold" text-anchor="middle" fill="#2e7d32">/planner</text>
  <text x="500" y="490" font-size="9" text-anchor="middle" fill="#555">Service + Action Server</text>

  <!-- Service -->
  <rect x="320" y="460" width="120" height="40" fill="#bbdefb" stroke="#1976d2" stroke-width="2" rx="4"/>
  <text x="380" y="477" font-size="10" font-weight="bold" text-anchor="middle" fill="#1565c0">Service:</text>
  <text x="380" y="492" font-size="9" text-anchor="middle" fill="#555">/compute_path</text>

  <!-- Action -->
  <rect x="640" y="460" width="120" height="40" fill="#c8e6c9" stroke="#388e3c" stroke-width="2" rx="4"/>
  <text x="700" y="477" font-size="10" font-weight="bold" text-anchor="middle" fill="#2e7d32">Action:</text>
  <text x="700" y="492" font-size="9" text-anchor="middle" fill="#555">/navigate_to_goal</text>

  <!-- Controller Node -->
  <ellipse cx="700" cy="600" rx="80" ry="50" fill="#fff3e0" stroke="#f57c00" stroke-width="2"/>
  <text x="700" y="595" font-size="12" font-weight="bold" text-anchor="middle" fill="#e65100">/controller</text>
  <text x="700" y="610" font-size="9" text-anchor="middle" fill="#555">Action Client + Publisher</text>

  <!-- Motor Commands Topic -->
  <rect x="820" y="580" width="70" height="40" fill="#fff3e0" stroke="#f57c00" stroke-width="1" rx="4"/>
  <text x="855" y="605" font-size="10" text-anchor="middle" fill="#e65100">/cmd_vel</text>

  <!-- Arrows -->
  <defs>
    <marker id="arrowGraph" markerWidth="8" markerHeight="8" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#666" />
    </marker>
  </defs>

  <!-- Sensor to Topics -->
  <line x1="220" y1="150" x2="280" y2="150" stroke="#666" stroke-width="2" marker-end="url(#arrowGraph)"/>
  <line x1="220" y1="250" x2="280" y2="250" stroke="#666" stroke-width="2" marker-end="url(#arrowGraph)"/>
  <line x1="220" y1="350" x2="280" y2="350" stroke="#666" stroke-width="2" marker-end="url(#arrowGraph)"/>

  <!-- Topics to Processing -->
  <line x1="370" y1="150" x2="430" y2="180" stroke="#666" stroke-width="2" marker-end="url(#arrowGraph)"/>
  <line x1="370" y1="250" x2="430" y2="210" stroke="#666" stroke-width="2" marker-end="url(#arrowGraph)"/>
  <line x1="370" y1="350" x2="430" y2="350" stroke="#666" stroke-width="2" marker-end="url(#arrowGraph)"/>

  <!-- Processing to Outputs -->
  <line x1="580" y1="200" x2="640" y2="200" stroke="#666" stroke-width="2" marker-end="url(#arrowGraph)"/>
  <line x1="580" y1="350" x2="640" y2="350" stroke="#666" stroke-width="2" marker-end="url(#arrowGraph)"/>

  <!-- Outputs to Planner -->
  <line x1="690" y1="220" x2="520" y2="440" stroke="#666" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowGraph)"/>
  <line x1="690" y1="350" x2="520" y2="440" stroke="#666" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrowGraph)"/>

  <!-- Planner to Controller (Action) -->
  <line x1="640" y1="500" x2="640" y2="575" stroke="#388e3c" stroke-width="3" marker-end="url(#arrowGraph)"/>

  <!-- Controller to Motors -->
  <line x1="780" y1="600" x2="820" y2="600" stroke="#666" stroke-width="2" marker-end="url(#arrowGraph)"/>

  <!-- Legend -->
  <rect x="50" y="550" width="250" height="120" fill="#f5f5f5" stroke="#999" stroke-width="1" rx="5"/>
  <text x="175" y="575" font-size="13" font-weight="bold" text-anchor="middle" fill="#333">Legend</text>

  <ellipse cx="80" cy="600" rx="25" ry="18" fill="#e3f2fd" stroke="#1976d2" stroke-width="1"/>
  <text x="120" y="605" font-size="10" fill="#555">= Node</text>

  <rect x="60" y="620" width="40" height="20" fill="#fff3e0" stroke="#f57c00" stroke-width="1" rx="3"/>
  <text x="120" y="633" font-size="10" fill="#555">= Topic</text>

  <rect x="60" y="645" width="40" height="20" fill="#bbdefb" stroke="#1976d2" stroke-width="1" rx="3"/>
  <text x="120" y="658" font-size="10" fill="#555">= Service</text>

  <line x1="185" y1="600" x2="225" y2="600" stroke="#666" stroke-width="2" marker-end="url(#arrowGraph)"/>
  <text x="250" y="605" font-size="10" fill="#555">= Data flow</text>

  <line x1="185" y1="630" x2="225" y2="630" stroke="#666" stroke-width="2" stroke-dasharray="3,3"/>
  <text x="265" y="635" font-size="10" fill="#555">= Subscribe</text>
</svg>
